{"version":3,"sources":["webpack:///src/components/disc/disc.vue","webpack:///./src/components/disc/disc.vue?8ef4","webpack:///./src/components/disc/disc.vue","webpack:///./src/api/recommend.js"],"names":["data","songs","components","MusicList","__WEBPACK_IMPORTED_MODULE_1__base_music_list_music_list__","computed","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","title","this","disc","dissname","bgImage","imgurl","Object","__WEBPACK_IMPORTED_MODULE_2_vuex__","created","getSongList","methods","_this","dissid","$router","push","__WEBPACK_IMPORTED_MODULE_3__api_recommend__","then","res","jsonCallback","code","__WEBPACK_IMPORTED_MODULE_4__api_config__","_normalizeSongs","cdlist","songlist","console","log","eval","list","ret","forEach","item","songid","albumid","song","__WEBPACK_IMPORTED_MODULE_5__common_js_song_Class__","getVkeys","disc_disc","render","_h","$createElement","_c","_self","attrs","name","length","bg-image","_e","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2__config_js__","platform","uin","needNewCode","__WEBPACK_IMPORTED_MODULE_3_axios___default","a","get","params","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","hostUin","sin","ein","sortId","categoryId","rnd","Math","random","type","json","onlysong","gtk","disstid","defaults","withCredentials","baseURL"],"mappings":"2tBAgBAA,KADA,WAEA,OACAC,WAGAC,YACAC,UAAAC,0DAAA,GAEAC,SAAAC,uEACAC,MADA,WAEA,OAAAC,KAAAC,KAAAC,UAEAC,QAJA,WAKA,OAAAH,KAAAC,KAAAG,SAEAC,OAAAC,mCAAA,EAAAD,EAAA,UAEAE,QAlBA,WAmBAP,KAAAQ,eAEAC,SACAD,YADA,SAAAA,cAEA,IAAAE,MAAAV,KACAA,KAAAC,KAAAU,QACAX,KAAAY,QAAAC,KAAA,cAGAR,OAAAS,6CAAA,EAAAT,CAAAL,KAAAC,KAAAU,QAAAI,KAAA,SAAAC,KACA,SAAAC,aAAAzB,GACAA,EAAA0B,OAAAC,0CAAA,EACAT,MAAAjB,MAAAiB,MAAAU,gBAAA5B,EAAA6B,OAAA,GAAAC,UAEAC,QAAAC,IAAA,oCAGAC,KAAAT,QAGAI,gBAlBA,SAkBAM,GACA,IAAAC,KASA,OARAD,EAAAE,QAAA,SAAAC,GACA,GAAAA,EAAAC,QAAAD,EAAAE,QAAA,CACA,IAAAC,EAAA3B,OAAA4B,oDAAA,EAAA5B,CAAAwB,GACAG,EAAAE,WAAAnB,KAAA,WACAY,EAAAd,KAAAmB,QAIAL,yGC7DAQ,GADiBC,OAFjB,WAA0B,IAAaC,EAAbrC,KAAasC,eAA0BC,EAAvCvC,KAAuCwC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,cAAwBE,OAAOC,KAAA,WAA9F1C,KAA8GP,MAAAkD,OAAA,EAAAJ,EAAA,cAAwCE,OAAO1C,MAA7JC,KAA6JD,MAAA6C,WAA7J5C,KAA6JG,QAAAV,MAA7JO,KAA6JP,SAA7JO,KAAyN6C,MAAA,IAElOC,oBCCjB,IASAC,EAZA,SAAAC,GACAC,EAAA,SAgBAC,EAdAD,EAAA,OAcAE,CACAlD,EAAA,EACAkC,GATA,EAWAY,EAPA,kBAEA,MAUAK,EAAA,QAAAF,EAAA,oECjBO,WAEH,IAAM1D,EAAO6D,OAAkBC,EAAA,GAE3BC,SAAU,KAEVC,IAAK,EACLC,YAAa,IAIjB,OAAOC,EAAAC,EAAMC,IAAI,qBACbC,OAAQrE,IACTuB,KAAK,SAAUC,GACd,OAAO8C,EAAAH,EAAQI,QAAQ/C,EAAIxB,aAK5B,WAEH,IAAMA,EAAO6D,OAAkBC,EAAA,GACvBC,SAAU,MACVS,QAAS,EACTC,IAAK,EACLC,IAAK,GACLC,OAAQ,EACRV,YAAa,EACbW,WAAY,IACZC,IAAKC,KAAKC,WAGlB,OAAOb,EAAAC,EAAMC,IAAI,oBACbC,OAAQrE,IACTuB,KAAK,SAAUC,GACd,OAAO8C,EAAAH,EAAQI,QAAQ/C,EAAIxB,aAK5B,SAAsBmB,GAEzB,IACMnB,EAAO6D,OAAkBC,EAAA,GACvBC,SAAU,MACVS,QAAS,EACTQ,KAAM,EACNC,KAAM,EACNC,SAAU,EACVjB,YAAa,EACbkB,IAAK,SACLC,QAASjE,IAGjB,OAAO+C,EAAAC,EAAMC,IAZD,oBAaRC,OAAQrE,IACTuB,KAAK,SAAUC,GACd,OAAO8C,EAAAH,EAAQI,QAAQ/C,EAAIxB,wFA9DnCkE,EAAAC,EAAMkB,SAASC,iBAAkB,EACjCpB,EAAAC,EAAMkB,SAASE,QAAU","file":"static/js/2.ca738cb513ff631e1940.js","sourcesContent":["<!-- 这个页面是推荐页面点击的详情页面 -->\n\n<template>\n  <transition name=\"slide\">\n    <music-list :title=\"title\" :bg-image=\"bgImage\" :songs=\"songs\" v-if=\"songs.length>0\"></music-list>\n  </transition>\n</template>\n\n<script>\nimport MusicList from '@/base/music-list/music-list'\nimport {mapGetters} from 'vuex'\nimport {getSongList} from '@/api/recommend'\nimport {ERR_OK} from '@/api/config'\nimport {createSong} from '_common/js/song_Class'\n\nexport default{\n  data () {\n    return {\n      songs:[]\n    }\n  },\n  components:{\n    MusicList\n  },\n  computed:{\n    title () {\n      return this.disc.dissname\n    },\n    bgImage () {\n      return this.disc.imgurl\n    },\n    ...mapGetters(['disc'])\n  },\n  created () {\n    this.getSongList()\n  },\n  methods:{\n    getSongList () {\n      const _this = this\n      if (!this.disc.dissid) {\n        this.$router.push('/recommend')\n      }\n      /* eslint-disable */\n      getSongList(this.disc.dissid).then((res) => {\n        function jsonCallback (data) {\n          if(data.code === ERR_OK){\n            _this.songs = _this._normalizeSongs(data.cdlist[0].songlist)\n          }else{\n            console.log(\"recommend-disc-getSongList方法请求错误\")\n          }\n        }\n        eval(res)\n      })\n    },\n    _normalizeSongs(list){ // 处理数据格式等\n      let ret = []\n      list.forEach((item) => {\n        if(item.songid && item.albumid){\n          var song = createSong(item)\n          song.getVkeys().then(() => {\n            ret.push(song)\n          })\n        }\n      })\n      return ret\n    }\n  }\n}\n\n</script>\n\n<style lang=\"stylus\" scoped>\n  .slide-enter-active,.slider-leave-active\n    transition all linear .3s\n  .slide-enter,.slide-leave-to\n    transform translate3d(100%,0,0)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/disc/disc.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[(_vm.songs.length>0)?_c('music-list',{attrs:{\"title\":_vm.title,\"bg-image\":_vm.bgImage,\"songs\":_vm.songs}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-746c692e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/disc/disc.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-746c692e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./disc.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./disc.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./disc.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-746c692e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./disc.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-746c692e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/disc/disc.vue\n// module id = null\n// module chunks = ","// 这个文件是利用前面进一步封装的jsonp来跨域抓取网上QQ音乐的真实的数据\n// import { commonPramas, options } from './config.js'\nimport { commonPramas } from './config.js'\nimport Axios from 'axios'\nAxios.defaults.withCredentials = true\nAxios.defaults.baseURL = 'http://10.202.2.112:9000'\n    // import jsonp from '_common/js/jsonp.js'\n\n// 拉取QQ音乐的首页的轮播图的数据，之前是用的jsonp的方法跨域本地请求，但是由于后面这个QQ网页在请求这个接口的时候，给了一个referer的限制，所以获取不到，后面通过用Axios和在webpack.dev.conf.js中模拟本地接口请求和referer设置，请求得到\nexport function getRecommend () {\n    // const url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'\n    const data = Object.assign({}, commonPramas, {\n        // 请求资源发起方是用的什么页面类型\n        platform: 'h5',\n        // uin：登录的 qq号\n        uin: 0,\n        needNewCode: 1\n    })\n\n    // return jsonp(url, data, options)  //这是在没有referer限制的时候可以用jsonp来拉取数据\n    return Axios.get('/api/getRecommend', {\n        params: data\n    }).then(function (res) {\n        return Promise.resolve(res.data)\n    })\n}\n\n// 在QQ音乐上面拉取pc端的全部歌单页面里面的歌曲数据\nexport function getDiscList () {\n    // const url = 'https://c.y.qq.com/splcloud/fcgi-bin/fcg_get_diss_by_tag.fcg'\n    const data = Object.assign({}, commonPramas, {\n            platform: 'yqq',\n            hostUin: 0,\n            sin: 0,\n            ein: 29,\n            sortId: 5,\n            needNewCode: 0,\n            categoryId: 10000000,\n            rnd: Math.random()\n        })\n        // return jsonp(url, data, options)\n    return Axios.get('/api/getDiscList', {\n        params: data\n    }).then(function (res) {\n        return Promise.resolve(res.data)\n    })\n}\n\n// 获取推荐页面的点开详情的信息\nexport function getSongList (dissid) {\n    //  const url = 'https://c.y.qq.com/qzone/fcg-bin/fcg_ucc_getcdinfo_byids_cp.fcg'\n    const url = '/api/getSongList'\n    const data = Object.assign({}, commonPramas, {\n            platform: 'yqq',\n            hostUin: 0,\n            type: 1,\n            json: 1,\n            onlysong: 0,\n            needNewCode: 0,\n            gtk: 67232076,\n            disstid: dissid\n        })\n        // return jsonp(url, data, options)\n    return Axios.get(url, {\n        params: data\n    }).then(function (res) {\n        return Promise.resolve(res.data)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/recommend.js"],"sourceRoot":""}