{"version":3,"sources":["webpack:///src/components/login.vue","webpack:///./src/components/login.vue?a273","webpack:///./src/components/login.vue"],"names":["login","data","_this","this","show","canUse","ruleForm2","pass","user","rules2","validator","rule","value","callback","Error","trigger","created","_this2","setTimeout","methods","extends_default","submitForm","formName","_this3","$refs","validate","valid","console","log","loading","toshow","tohide","$router","push","resetForm","resetFields","Object","vuex_esm","setUserToken","components","Loading","watch","ruleForm2.pass","val","components_login","render","_vm","_h","$createElement","_c","_self","attrs","name","staticClass","ref","_v","src","__webpack_require__","alt","model","status-icon","rules","label-width","label","prop","placeholder","$$v","$set","expression","type","class","btn","on","click","$event","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"js/3.b6538e7c4d893c51dbb4.js","sourcesContent":["<template>\n<transition name=\"slide\">\n  <div v-if=\"show\" class=\"login\">\n    <loading ref=\"loading\" class=\"loading\"></loading>\n    <div class=\"bg\"></div>\n    <div class=\"content\">\n      <div class=\"top\">\n        <div class=\"img\">\n          <img src=\"../assets/imgs/bar1.jpg\" alt=\"\">\n        </div>\n        <p>校园食堂</p>\n      </div>\n      <el-form :model=\"ruleForm2\" status-icon :rules=\"rules2\" ref=\"ruleForm2\" label-width=\"100px\" class=\"demo-ruleForm\">\n        <el-form-item style=\"\" label=\"\" prop=\"user\">\n          <i class=\"iconfont\">&#xe63d;</i>\n          <el-input placeholder=\"用户名\" class=\"user defaultInput\" v-model=\"ruleForm2.user\"></el-input>\n        </el-form-item>\n        <el-form-item class=\"passOut\" prop=\"pass\">\n          <i class=\"iconfont\">&#xe63b;</i>\n          <el-input placeholder=\"密码\" class=\"pass defaultInput\" type=\"password\" v-model=\"ruleForm2.pass\">\n          </el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button :class='{btn:true,canUse:canUse}' type=\"primary\" @click=\"submitForm('ruleForm2')\">登录</el-button>\n          <el-button class=\"btn btn_reset\" @click=\"resetForm('ruleForm2')\">重置</el-button>\n          <!-- <div class=\"moreLoginWay\">\n            <el-row>\n              <el-col :span=\"12\">\n                短信验证登录\n              </el-col>\n              <el-col style=\"text-align:right;\" :span=\"12\">\n                手机快速注册\n              </el-col>\n            </el-row>\n          </div> -->\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</transition>\n\n</template>\n\n<script>\nimport Loading from '@/base/loading'\nimport {mapMutations} from 'vuex'\n\nexport default {\n  data () {\n    var checkUser = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('用户名不能为空'))\n      } else {\n        callback()\n      }\n    }\n    var validatePass = (rule, value, callback) => {\n      if (!this.ruleForm2.user) {\n        this.ruleForm2.pass = ''\n        callback(new Error('请先输入用户名'))\n      } else if (value === '') {\n        callback(new Error('请输入密码'))\n      } else {\n        this.canUse = true\n        callback()\n      }\n    }\n    return {\n      show: false,\n      canUse: false,\n      ruleForm2: {\n        pass: '123321',\n        user: 'Sundar'\n      },\n      rules2: {\n        pass: [\n          { validator: validatePass, trigger: 'blur' }\n        ],\n        user: [\n          { validator: checkUser, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  created () {\n    if (this.ruleForm2.user && this.ruleForm2.pass) {\n      this.canUse = true\n    }\n    setTimeout(() => {\n      this.show = true\n    }, 20)\n  },\n  methods: {\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) { // 验证成功\n          this.$refs.loading.toshow()\n          setTimeout(() => { // 为了有登录请求的样式，这里做个延时\n            this.$refs.loading.tohide()\n            this.$router.push('/')\n          }, 1000)\n          // this.$axios({\n          //   method: 'post',\n          //   url: 'api/AppLogin/Login',\n          //   data: {\n          //     'Account': this.ruleForm2.user,\n          //     'Password': this.ruleForm2.pass\n          //   }\n          // }).then(res => {\n          //   console.log(res)\n          //   if (res.data.Code === 1) { // 验证成功\n          //     this.setUserToken(res.data.Data)\n          //     setTimeout(() => { // 为了有登录请求的样式，这里做个延时\n          //       this.$refs.loading.tohide()\n          //       this.$router.push('/')\n          //     }, 1000)\n          //   } else {\n          //     this.$alert(res.Message, {customClass: 'myConfirm'})\n          //   }\n          // }).catch(res => {\n          //   this.$refs.loading.tohide()\n          //   this.$alert('请求出错！！', {\n          //     customClass: 'myConfirm'\n          //   })\n          // })\n\n          // this.$router.push('/')\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    resetForm (formName) {\n      this.canUse = false\n      this.$refs[formName].resetFields()\n    },\n    ...mapMutations({\n      'setUserToken': 'SET_USER_TOKEN'\n    })\n  },\n  components: {\n    Loading\n  },\n  watch: {\n    'ruleForm2.pass' (val) {\n      console.log(val)\n      if (val.pass && val.user) {\n        this.canUse = true\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n@import '~@/assets/styl/mixin'\n\n.slide-enter-active\n  transition all linear .5s\n.slide-enter,.slide-leave-to\n  opacity 0\n.login\n  .loading\n    position fixed\n    top 0\n    bottom 0\n    z-index 999\n  .bg\n    width 100%\n    position fixed\n    left 0\n    top 0\n    height 100vh\n    z-index -1\n    background url('../assets/imgs/bg9.jpg') center no-repeat\n    background-size cover\n    filter blur(4px)\n  .content\n    padding-top 45px\n    height 100vh\n    background rgba(0,0,0,0.3)\n    .top\n      text-align center\n      color white\n      .img\n        border-radius 100%\n        height 84px\n        width 84px\n        margin 0 auto\n        overflow hidden\n        border 2px solid rgb(244,244,244)\n        text-align center\n        img\n          width 80px\n          height 80px\n          padding 5px\n          border-radius 100%\n      p\n        margin-top 10px\n        font-weight 900\n        font-size 20px\n    .demo-ruleForm\n      padding 40px\n  .btn\n    background rgb(255,217,74)\n    border none\n    border-radius 15px\n    line-height 15px\n    display block\n    width 100%\n    margin 0 auto\n    margin-top 30px\n    padding 8px\n    opacity 0.8\n    &.canUse\n      opacity 1\n    &.btn_reset\n      opacity 1\n      margin-top 10px\n      background white\n      border 1px solid $color-text-yellow\n      color $color-text-yellow\n  .passOut\n    position relative\n  .moreLoginWay\n    color $color-text-ll\n  .iconfont\n    position absolute\n    left 0\n    top 0\n    color white\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[(_vm.show)?_c('div',{staticClass:\"login\"},[_c('loading',{ref:\"loading\",staticClass:\"loading\"}),_vm._v(\" \"),_c('div',{staticClass:\"bg\"}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"img\"},[_c('img',{attrs:{\"src\":require(\"../assets/imgs/bar1.jpg\"),\"alt\":\"\"}})]),_vm._v(\" \"),_c('p',[_vm._v(\"校园食堂\")])]),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm2\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm2,\"status-icon\":\"\",\"rules\":_vm.rules2,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"user\"}},[_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_vm._v(\" \"),_c('el-input',{staticClass:\"user defaultInput\",attrs:{\"placeholder\":\"用户名\"},model:{value:(_vm.ruleForm2.user),callback:function ($$v) {_vm.$set(_vm.ruleForm2, \"user\", $$v)},expression:\"ruleForm2.user\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"passOut\",attrs:{\"prop\":\"pass\"}},[_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")]),_vm._v(\" \"),_c('el-input',{staticClass:\"pass defaultInput\",attrs:{\"placeholder\":\"密码\",\"type\":\"password\"},model:{value:(_vm.ruleForm2.pass),callback:function ($$v) {_vm.$set(_vm.ruleForm2, \"pass\", $$v)},expression:\"ruleForm2.pass\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{class:{btn:true,canUse:_vm.canUse},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('ruleForm2')}}},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn btn_reset\",on:{\"click\":function($event){_vm.resetForm('ruleForm2')}}},[_vm._v(\"重置\")])],1)],1)],1)],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-678a2ec9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-678a2ec9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-678a2ec9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-678a2ec9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}